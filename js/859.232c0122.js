"use strict";(self["webpackChunkcbn_magazine"]=self["webpackChunkcbn_magazine"]||[]).push([[859],{5859:function(a,e,t){t.r(e),t.d(e,{default:function(){return g}});var n=function(){var a=this,e=a._self._c;return e("div",{staticClass:"allView"},[e("ReadBanner",{attrs:{banner:a.banner}}),e("NewOne",{attrs:{book1:a.book1,num:a.num}}),a.book1.length?e("wd-infinite-load",{ref:"loadmore",attrs:{loading:a.loading},on:{loadmore:a.loadmore}}):a._e()],1)},o=[],s=(t(7658),t(2618)),r=t(7459),i=t(881),h={data(){return{arr:[],arrbook:[],banner:[],book:[],book1:[],year:(new Date).getFullYear(),num:[],arrbook1:[],loading:!1}},created(){this.getBannerData=(0,i.Z)(this.getBannerData),this.getHomeNewsData=(0,i.Z)(this.getHomeNewsData)},mounted(){this.getBannerData(),this.getHomeNewsData()},methods:{getBannerData(){this.$axios.get("http://api2021.cbnweek.com/v4/magazines?year=2022&type=magazine").then((({data:a})=>{this.arr=a,this.arr.map((({data:a})=>{a.length>1?a.map((a=>this.banner.push(a))):this.banner.push(a[0])}))}))},getHomeNewsData(){this.year--,this.num.push(this.year),this.$axios.get(`http://api2021.cbnweek.com/v4/magazines?year=${this.year}&type=magazine`).then((({data:a})=>{this.arrbook1=a,this.arrbook1.map((({data:a})=>{a.length>1?a.map((a=>this.book1.push(a))):this.book1.push(a[0])})),this.$nextTick((()=>{this.loading=!1}))})).catch((()=>this.$refs.loadmore.loadEnd()))},loadmore(){"/read/magazine"==this.$route.path&&(this.loading=!0,this.getHomeNewsData())}},components:{ReadBanner:s.Z,NewOne:r.Z}},l=h,m=t(1001),d=(0,m.Z)(l,n,o,!1,null,null,null),g=d.exports}}]);
//# sourceMappingURL=859.232c0122.js.map